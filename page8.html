<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô - ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</title>

  <!-- ‚úÖ Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

  <style>
    /* ‚úÖ ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå FCMinimal */
    @font-face {
      font-family: 'FCMinimal';
      src: url('fonts/FC_Minimal_Regular.ttf') format('truetype');
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'FCMinimal', sans-serif;
      background: url('images/‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á5.gif') no-repeat center center fixed;
      background-size: cover;
      overflow: hidden;
      height: 100vh;
      position: relative;
    }

    .temple-layer {
      position: absolute;
      bottom: -5.7%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1;
      width: 100%;
      height: 100%;
    }

    .character-wrapper {
      position: absolute;
      bottom: 6px;
      right: -200px;
      z-index: 2;
      animation: walk 10s linear infinite;
    }

    .character-img {
      width: auto;
      height: auto;
    }

    .flower {
      position: absolute;
      bottom: 30px;
      left: 50px;
      width: 1000px;
      z-index: 3;
    }

    @keyframes walk {
      0% { right: -200px; }
      100% { right: 120vw; }
    }

    h1 {
      text-align: center;
      color: white;
      text-shadow: 0 0 5px gold;
      z-index: 3;
      position: relative;
      font-size: 10rem;
      margin-top: 1rem;
    }

    .wish-box {
      position: absolute;
      bottom: 80%;
      left: 60%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      font-size: 5.5rem;
      padding: 1rem 2rem;
      border-radius: 20px;
      border: 2px solid gold;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      text-align: center;
      white-space: nowrap;
      z-index: 3;
    }
  </style>
</head>
<body>
  <h1>‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà<br>‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ</h1>

  <div id="characterDisplay"></div>

  <script>
    const characterData = JSON.parse(localStorage.getItem('characterData'));
    const measure = localStorage.getItem('measureSelected');
    const offeringData = JSON.parse(localStorage.getItem('offeringData'));

    const gifMap = {
      'boyjing1': 'boy1.gif',
      'boyjing2': 'boy2.gif',
      'girljing1': 'girl1.gif',
      'girljing2': 'girl2.gif',
      'boy2': 'boy2.gif',
      'girl1': 'girl1.gif',
      'girl2': 'girl2.gif'
    };

    const flowerMap = {
      '1.png': '‡∏î‡∏≠‡∏Å1.png',
      '2.png': '‡∏î‡∏≠‡∏Å2.png',
      '3.png': '‡∏î‡∏≠‡∏Å3.png',
      '4.png': '‡∏î‡∏≠‡∏Å4.png'
    };

    const container = document.getElementById('characterDisplay');

    if (characterData && characterData.character && characterData.name) {
      const wrapper = document.createElement('div');
      wrapper.className = 'character-wrapper';

      const characterImg = document.createElement('img');
      const characterFile = gifMap[characterData.character] || `${characterData.character}.png`;
      characterImg.src = `images/${characterFile}`;
      characterImg.className = 'character-img';
      wrapper.appendChild(characterImg);

      if (offeringData && offeringData.wish) {
        const wishBox = document.createElement('div');
        wishBox.className = 'wish-box';
        wishBox.innerHTML = `ü´ó <strong></strong> ${offeringData.wish} üôè`;
        wrapper.appendChild(wishBox);
      }

      if (offeringData && offeringData.offering) {
        const flowerImg = document.createElement('img');
        const flowerFile = flowerMap[offeringData.offering] || offeringData.offering + '.png';
        flowerImg.src = `images/${flowerFile}`;
        flowerImg.className = 'flower';
        wrapper.appendChild(flowerImg);
      }

      container.appendChild(wrapper);
    }

   async function saveToGoogleSheetSimple() {
  const url = "https://script.google.com/macros/s/AKfycbznG67SZ0HGAiJXrXBoPZcIIlC46-kuYo6pix8kLr4gXUxxAvx_ON1YEiB1GhluFp34qA/exec"; // üîÅ ‡∏ß‡∏≤‡∏á URL API ‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡πá‡∏á

  const payload = {
    name: characterData?.name || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠",
    wish: offeringData?.wish || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£"
  };

  try {
    await fetch(url, {
      method: "POST",
      mode: "no-cors",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    });
    console.log("‚úÖ ‡∏™‡πà‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  } catch (error) {
    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤:", error);
  }
}
window.addEventListener("DOMContentLoaded", () => {
  saveToGoogleSheetSimple();
});
  </script>
</body>
</html>
